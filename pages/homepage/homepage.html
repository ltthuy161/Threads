<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Home / Threads</title>
    <link rel="stylesheet" href="./style.min.css" />

    <link rel="stylesheet" href="../base/sidebar/sidebar.css" />
    <link rel="stylesheet" href="../base/floating-btn/floating-btn.css" />
    <link rel="stylesheet" href="../posting/posting.min.css" />

    <script defer src="post.js"></script>

    <script defer src="../base/loadComponents.js"></script>
    <script type="module" src="../base/applyTheme.js"></script>
    <script src="../base/showPopup.js"></script>
    <script>
        document.addEventListener("DOMContentLoaded", () => {
            loadComponent("sidebar", "../base/sidebar/sidebar.html").then(() => {
                setActiveIcon("home-icon");
            });
            loadComponent("floating-btn", "../base/floating-btn/floating-btn.html");
            loadComponent("posting", "../posting/posting.html");


            const postContainer = document.querySelector(".post-container");

            if (window.location.pathname.startsWith("/post-detail")) {
                const postId = window.location.pathname.split("/")[2];
                renderPostDetail(postId);
            } else {
                loadHomepage();
            }

           
            window.addEventListener("popstate", (event) => {
                if (event.state && event.state.postId) {
                    renderPostDetail(event.state.postId);
                } else {
                    loadHomepage();
                }
            });
        });
    </script>
  </head>
  <body>
    <div id="sidebar"></div>

    <div class="main-content">
      <header class="header homepage-header">
        <div class="tabs">
          <button class="tab active"><span>For you</span></button>
          <button class="tab"><span>Following</span></button>
        </div>
      </header>

      <header class="header post-detail-header" style="display: none;">
        <button
          class="navigation-button"
          id="prev"
          style="border: none; outline: none;"
          onclick="goToHomepage()"
        >
          <img
            src="../../assets/vendor/icons/prev.svg"
            alt="Icon description"
            class="icon"
            id="prev-icon"
          />
        </button>
        <div class="post-title">Post</div>
      </header>

      <div class="container">
        <ul class="post-container-homepage"></ul>
      </div>
    </div>
    <div id="floating-btn"></div>

    <div id="posting" style="display: none"></div>
    </body>

    <div id="reply-box-container" class="reply-box-container" style="display: none;"></div>
    </div>
  </body>

</html>
